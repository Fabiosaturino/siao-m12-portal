<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plano de Consolida√ß√£o ‚Äî Minist√©rio Apost√≥lico Si√£o</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{
            --bg:#2b2b2b;--bg2:#353535;--bg3:#3d3d3d;
            --surface:#fff;--surface2:#f7f7f8;--surface3:#efefef;
            --dark:#1a1a1a;--text:#333;--muted:#888;--light-muted:#aaa;
            --border:#e2e2e2;--border-light:#f0f0f0;
            --accent:#1a1a1a;--accent-light:#444;
            --success:#2e7d32;--success-bg:rgba(46,125,50,.08);
            --radius:10px;--radius-sm:7px;
        }
        html{scroll-behavior:smooth}
        body{font-family:'Montserrat',sans-serif;background:var(--surface2);color:var(--text);min-height:100vh;-webkit-font-smoothing:antialiased}

        /* ===== HEADER ===== */
        .header{
            background:var(--bg);position:sticky;top:0;z-index:100;
            padding:12px 20px;
            display:flex;align-items:center;justify-content:space-between;
            border-bottom:1px solid rgba(255,255,255,.06);
            backdrop-filter:blur(20px);
        }
        .header-brand{display:flex;align-items:center;gap:10px}
        .header-brand img{height:14px;opacity:.9}
        .header-brand img:nth-child(2){height:26px;opacity:.8}
        .header-info{margin-left:8px}
        .header-title{color:#fff;font-size:.72rem;font-weight:700;letter-spacing:1.2px;text-transform:uppercase}
        .header-sub{color:#666;font-size:.52rem;letter-spacing:.8px;margin-top:1px}
        .header-right{display:flex;align-items:center;gap:10px}
        .user-name{color:#aaa;font-size:.7rem;font-weight:500}
        .btn-back{
            padding:6px 14px;background:transparent;border:1px solid rgba(255,255,255,.15);
            color:#888;border-radius:5px;font-family:'Montserrat',sans-serif;
            font-size:.6rem;font-weight:600;cursor:pointer;letter-spacing:.8px;
            text-transform:uppercase;transition:all .3s;text-decoration:none;
        }
        .btn-back:hover{border-color:#fff;color:#fff}

        @media(max-width:600px){
            .header{flex-direction:column;gap:8px;padding:10px 16px}
            .header-right{width:100%;justify-content:space-between}
            .header-info{display:none}
        }

        /* ===== HERO BANNER ===== */
        .hero{
            background:var(--bg);
            padding:32px 20px 36px;
            text-align:center;
            position:relative;
            overflow:hidden;
        }
        .hero::before{
            content:'';position:absolute;top:0;left:0;right:0;bottom:0;
            background:radial-gradient(ellipse at 50% 0%, rgba(255,255,255,.04) 0%, transparent 70%);
        }
        .hero-title{
            color:#fff;font-size:1.4rem;font-weight:800;letter-spacing:2px;
            text-transform:uppercase;position:relative;
        }
        .hero-line{
            width:40px;height:2px;background:#fff;margin:12px auto;opacity:.3;
            border-radius:2px;position:relative;
        }
        .hero-subtitle{
            color:#777;font-size:.7rem;letter-spacing:2px;text-transform:uppercase;
            position:relative;font-weight:400;
        }
        @media(max-width:600px){
            .hero{padding:24px 16px 28px}
            .hero-title{font-size:1.1rem;letter-spacing:1.5px}
        }

        /* ===== PROGRESS BAR ===== */
        .progress-wrap{
            background:#fff;border-bottom:1px solid var(--border);
            padding:14px 20px;position:sticky;top:56px;z-index:90;
        }
        .progress-inner{max-width:780px;margin:0 auto;display:flex;align-items:center;gap:12px}
        .progress-label{font-size:.6rem;font-weight:600;color:var(--muted);letter-spacing:.5px;text-transform:uppercase;white-space:nowrap}
        .progress-bar{flex:1;height:4px;background:var(--surface3);border-radius:4px;overflow:hidden}
        .progress-fill{height:100%;width:0%;background:var(--dark);border-radius:4px;transition:width .5s ease}
        .progress-pct{font-size:.65rem;font-weight:700;color:var(--dark);min-width:32px;text-align:right}
        @media(max-width:600px){.progress-wrap{top:76px;padding:10px 16px}}

        /* ===== CONTENT ===== */
        .content{max-width:820px;margin:0 auto;padding:20px 16px 60px}

        /* ===== SECTION CARD ===== */
        .section{
            background:var(--surface);border-radius:var(--radius);
            margin-bottom:16px;border:1px solid var(--border-light);
            box-shadow:0 1px 4px rgba(0,0,0,.04);
            overflow:hidden;
            animation:fadeUp .5s ease both;
        }
        @keyframes fadeUp{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
        .section:nth-child(1){animation-delay:.05s}
        .section:nth-child(2){animation-delay:.1s}
        .section:nth-child(3){animation-delay:.15s}
        .section:nth-child(4){animation-delay:.2s}
        .section:nth-child(5){animation-delay:.25s}
        .section:nth-child(6){animation-delay:.3s}
        .section:nth-child(7){animation-delay:.35s}

        .section-header{
            padding:18px 22px 14px;
            border-bottom:1px solid var(--border-light);
            display:flex;align-items:center;gap:10px;
        }
        .section-icon{
            width:30px;height:30px;border-radius:6px;
            background:var(--dark);color:#fff;
            display:flex;align-items:center;justify-content:center;
            font-size:.7rem;font-weight:800;flex-shrink:0;
        }
        .section-title{
            font-size:.78rem;font-weight:700;color:var(--dark);
            text-transform:uppercase;letter-spacing:1px;
        }
        .section-body{padding:18px 22px 22px}

        @media(max-width:600px){
            .section-header{padding:14px 16px 12px}
            .section-body{padding:14px 16px 18px}
        }

        /* ===== FORM FIELDS ===== */
        .form-row{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:14px}
        .form-row.single{grid-template-columns:1fr}
        .form-row:last-child{margin-bottom:0}
        @media(max-width:600px){.form-row{grid-template-columns:1fr;gap:10px;margin-bottom:10px}}

        .field label{
            display:block;font-size:.6rem;font-weight:600;color:var(--muted);
            margin-bottom:4px;text-transform:uppercase;letter-spacing:.6px;
        }
        .field input,.field select,.field textarea{
            width:100%;padding:10px 12px;
            border:1px solid var(--border);border-radius:var(--radius-sm);
            font-family:'Montserrat',sans-serif;font-size:.8rem;
            background:var(--surface2);color:var(--text);
            transition:all .25s ease;
        }
        .field input:focus,.field select:focus,.field textarea:focus{
            outline:none;border-color:#999;background:#fff;
            box-shadow:0 0 0 3px rgba(0,0,0,.04);
        }
        .field input::placeholder,.field textarea::placeholder{color:#bbb}
        .field textarea{resize:vertical;min-height:70px}

        /* ===== M√ìDULOS ===== */
        .modulo{
            display:grid;grid-template-columns:1fr 130px 1fr;gap:10px;align-items:center;
            padding:12px 14px;background:var(--surface2);border-radius:var(--radius-sm);
            border:1px solid var(--border-light);margin-bottom:8px;
            transition:all .2s ease;
        }
        .modulo:hover{border-color:var(--border);background:#f3f3f4}
        .modulo:last-child{margin-bottom:0}
        .modulo-name{display:flex;align-items:center;gap:10px;font-size:.78rem;font-weight:600;color:var(--text)}
        .modulo-num{
            width:26px;height:26px;border-radius:50%;
            background:var(--dark);color:#fff;
            display:flex;align-items:center;justify-content:center;
            font-size:.6rem;font-weight:700;flex-shrink:0;
        }
        .modulo input{
            padding:8px 10px;border:1px solid var(--border);border-radius:5px;
            font-family:'Montserrat',sans-serif;font-size:.75rem;
            background:#fff;color:var(--text);transition:all .25s;
        }
        .modulo input:focus{outline:none;border-color:#999;box-shadow:0 0 0 3px rgba(0,0,0,.04)}
        @media(max-width:600px){
            .modulo{grid-template-columns:1fr;gap:8px;padding:12px}
            .modulo-name{font-size:.75rem}
        }

        /* ===== CHECKLIST ===== */
        .check-item{
            padding:12px 14px;background:var(--surface2);border-radius:var(--radius-sm);
            border:1px solid var(--border-light);margin-bottom:8px;
            transition:all .25s ease;cursor:pointer;
        }
        .check-item:hover{background:#f0f0f1;border-color:var(--border)}
        .check-item.checked{background:var(--success-bg);border-color:rgba(46,125,50,.2)}
        .check-item:last-child{margin-bottom:0}
        .check-top{display:flex;align-items:center;gap:10px}
        .check-box{
            width:20px;height:20px;border-radius:5px;border:2px solid #ccc;
            display:flex;align-items:center;justify-content:center;
            flex-shrink:0;transition:all .25s;background:#fff;
        }
        .check-item.checked .check-box{background:var(--success);border-color:var(--success)}
        .check-box svg{width:12px;height:12px;stroke:#fff;stroke-width:3;fill:none;opacity:0;transition:all .2s}
        .check-item.checked .check-box svg{opacity:1}
        .check-label{font-size:.78rem;color:var(--text);flex:1;line-height:1.4}
        .check-req{font-size:.6rem;color:#aaa;font-style:italic;display:block;margin-top:2px}
        .check-obs{margin-top:10px;display:none}
        .check-item.checked .check-obs{display:block}
        .check-obs input{
            width:100%;padding:8px 10px;border:1px solid var(--border);
            border-radius:5px;font-family:'Montserrat',sans-serif;font-size:.75rem;
            background:#fff;
        }
        .check-obs input:focus{outline:none;border-color:#999}

        /* ===== ALIAN√áA / SIGNATURE PAD ===== */
        .sig-row{display:grid;grid-template-columns:1fr 1fr;gap:20px}
        @media(max-width:600px){.sig-row{grid-template-columns:1fr;gap:16px}}
        .sig-box{display:flex;flex-direction:column}
        .sig-label{
            font-size:.6rem;color:var(--muted);text-transform:uppercase;
            letter-spacing:.8px;font-weight:600;margin-bottom:8px;
        }
        .sig-canvas-wrap{
            position:relative;border:2px dashed var(--border);border-radius:var(--radius-sm);
            background:var(--surface2);overflow:hidden;transition:all .25s;
        }
        .sig-canvas-wrap.active{border-color:#999;background:#fff;border-style:solid}
        .sig-canvas-wrap.signed{border-color:var(--success);border-style:solid;background:#fff}
        .sig-canvas{width:100%;height:140px;display:block;cursor:crosshair;touch-action:none}
        @media(max-width:600px){.sig-canvas{height:120px}}
        .sig-placeholder{
            position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
            pointer-events:none;text-align:center;transition:opacity .3s;
        }
        .sig-placeholder-icon{font-size:1.4rem;margin-bottom:4px;opacity:.3}
        .sig-placeholder-text{font-size:.6rem;color:#bbb;letter-spacing:.5px}
        .sig-canvas-wrap.signed .sig-placeholder,.sig-canvas-wrap.active .sig-placeholder{opacity:0}
        .sig-actions{
            display:flex;justify-content:flex-end;gap:8px;margin-top:6px;
        }
        .sig-btn{
            padding:5px 12px;border:1px solid var(--border);background:#fff;
            border-radius:4px;font-family:'Montserrat',sans-serif;
            font-size:.58rem;font-weight:600;color:var(--muted);
            cursor:pointer;transition:all .2s;letter-spacing:.3px;text-transform:uppercase;
        }
        .sig-btn:hover{border-color:var(--dark);color:var(--dark)}
        .sig-btn.danger:hover{border-color:#d32f2f;color:#d32f2f}

        /* ===== SUBMIT ===== */
        .submit-section{
            background:var(--surface);border-radius:var(--radius);
            padding:22px;border:1px solid var(--border-light);
            box-shadow:0 1px 4px rgba(0,0,0,.04);margin-bottom:16px;
        }
        .btn-submit{
            width:100%;padding:14px;background:var(--dark);color:#fff;
            border:none;border-radius:8px;font-family:'Montserrat',sans-serif;
            font-size:.8rem;font-weight:700;letter-spacing:1.5px;
            text-transform:uppercase;cursor:pointer;
            transition:all .3s ease;position:relative;overflow:hidden;
        }
        .btn-submit:hover{background:#333;transform:translateY(-1px);box-shadow:0 4px 16px rgba(0,0,0,.15)}
        .btn-submit:active{transform:translateY(0)}
        .btn-submit:disabled{opacity:.5;cursor:not-allowed;transform:none}
        .btn-salvar-dados{background:var(--dark);font-size:.72rem;padding:12px;letter-spacing:1px}
        .btn-salvar-dados:hover{background:#333}
        .btn-salvar-alianca{background:#1565c0;font-size:.72rem;padding:12px;letter-spacing:1px}
        .btn-salvar-alianca:hover{background:#1976d2}
        .btn-objetivo{
            background:linear-gradient(135deg,#8d6e2e 0%,#c9a84c 30%,#f2d675 50%,#c9a84c 70%,#8d6e2e 100%);
            font-size:.85rem;padding:16px;letter-spacing:2px;
            color:#1a1a1a;font-weight:800;
            border:2px solid rgba(201,168,76,.4);
            box-shadow:0 4px 20px rgba(141,110,46,.3);
        }
        .btn-objetivo:hover{
            background:linear-gradient(135deg,#a07d34 0%,#d4b35a 30%,#f5dc82 50%,#d4b35a 70%,#a07d34 100%);
            border-color:rgba(201,168,76,.6);
            box-shadow:0 6px 28px rgba(141,110,46,.4);
            color:#1a1a1a;
        }

        /* ===== FOOTER ===== */
        .footer{
            background:var(--bg);padding:24px 20px;text-align:center;
            border-top:1px solid rgba(255,255,255,.06);
        }
        .footer-verse{color:#777;font-size:.68rem;font-style:italic;line-height:1.7}
        .footer-ref{color:#aaa;font-size:.62rem;font-weight:600;margin-top:4px}
        .footer-ministry{color:#555;font-size:.55rem;margin-top:12px;letter-spacing:2px;text-transform:uppercase}

        /* ===== SUCCESS OVERLAY ===== */
        .overlay{
            display:none;position:fixed;top:0;left:0;width:100%;height:100%;
            background:rgba(0,0,0,.6);backdrop-filter:blur(4px);
            z-index:1000;justify-content:center;align-items:center;padding:20px;
        }
        .overlay.show{display:flex}
        .overlay-box{
            background:#fff;border-radius:16px;padding:40px 32px;text-align:center;
            max-width:380px;width:100%;animation:popIn .3s ease;
        }
        @keyframes popIn{from{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}
        .overlay-icon{
            width:56px;height:56px;background:var(--success);border-radius:50%;
            display:flex;align-items:center;justify-content:center;margin:0 auto 16px;
        }
        .overlay-icon svg{width:28px;height:28px;stroke:#fff;stroke-width:3;fill:none}
        .overlay-box h3{font-size:1rem;margin-bottom:6px;color:var(--dark)}
        .overlay-box p{color:#888;font-size:.8rem;margin-bottom:20px;line-height:1.5}
        .btn-ok{
            padding:10px 32px;background:var(--dark);color:#fff;border:none;
            border-radius:8px;font-family:'Montserrat',sans-serif;font-weight:600;
            cursor:pointer;font-size:.8rem;letter-spacing:.5px;transition:all .3s;
        }
        .btn-ok:hover{background:#333}

        /* ===== SCROLL TO TOP ===== */
        .scroll-top{
            position:fixed;bottom:20px;right:20px;width:40px;height:40px;
            background:var(--dark);color:#fff;border:none;border-radius:50%;
            cursor:pointer;display:none;align-items:center;justify-content:center;
            box-shadow:0 2px 12px rgba(0,0,0,.2);z-index:50;transition:all .3s;
        }
        .scroll-top.show{display:flex}
        .scroll-top:hover{transform:translateY(-2px);box-shadow:0 4px 20px rgba(0,0,0,.3)}
        .scroll-top svg{width:18px;height:18px;stroke:#fff;stroke-width:2.5;fill:none}
    </style>
</head>
<body>

<!-- HEADER -->
<div class="header">
    <div class="header-brand">
        <img id="logoSiao" alt="Si√£o">
        <img id="logoM12" alt="M12">
        <div class="header-info">
            <div class="header-title">Plano de Consolida√ß√£o</div>
            <div class="header-sub">Fundamentos da F√© ‚Äî Vida no Reino de Deus</div>
        </div>
    </div>
    <div class="header-right">
        <span class="user-name" id="userName">L√≠der</span>
        <button class="btn-back" onclick="history.back()">Voltar</button>
    </div>
</div>

<!-- HERO -->
<div class="hero">
    <div class="hero-title">Plano de Consolida√ß√£o</div>
    <div class="hero-line"></div>
    <div class="hero-subtitle">Fundamentos da F√© ‚Äî Vida no Reino de Deus</div>
</div>

<!-- PROGRESS -->
<div class="progress-wrap">
    <div class="progress-inner">
        <span class="progress-label">Progresso</span>
        <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
        <span class="progress-pct" id="progressPct">0%</span>
    </div>
</div>

<!-- CONTENT -->
<div class="content">

    <!-- 1. DADOS DO DISC√çPULO -->
    <div class="section">
        <div class="section-header">
            <div class="section-icon">1</div>
            <div class="section-title">Dados do Disc√≠pulo</div>
        </div>
        <div class="section-body">
            <div class="form-row single">
                <div class="field"><label>Nome do disc√≠pulo *</label><input type="text" id="fNome" placeholder="Nome completo"></div>
            </div>
            <div class="form-row">
                <div class="field"><label>Telefone / WhatsApp</label><input type="tel" id="fTel" placeholder="(00) 00000-0000"></div>
                <div class="field"><label>Redes Sociais</label><input type="text" id="fRedes" placeholder="@instagram, etc."></div>
            </div>
            <div class="form-row">
                <div class="field"><label>Data de in√≠cio da caminhada</label><input type="date" id="fInicio"></div>
                <div class="field"><label>Rede</label><input type="text" id="fRede" placeholder="Rede do disc√≠pulo"></div>
            </div>
            <div class="form-row single">
                <div class="field"><label>Nome do discipulador</label><input type="text" id="fDiscipulador" placeholder="Nome do discipulador respons√°vel"></div>
            </div>
            <div style="margin-top:18px">
                <button class="btn-submit btn-salvar-dados" id="btnSalvarDados">Salvar Dados</button>
            </div>
        </div>
    </div>

    <!-- 2. M√ìDULOS -->
    <div class="section">
        <div class="section-header">
            <div class="section-icon">2</div>
            <div class="section-title">M√≥dulos de Consolida√ß√£o</div>
        </div>
        <div class="section-body" id="modulosContainer"></div>
    </div>

    <!-- 3. ALIAN√áA -->
    <div class="section">
        <div class="section-header">
            <div class="section-icon">3</div>
            <div class="section-title">Alian√ßa de Amor</div>
        </div>
        <div class="section-body">
            <div class="sig-row">
                <div class="sig-box">
                    <div class="sig-label">Assinatura do disc√≠pulo</div>
                    <div class="sig-canvas-wrap" id="sigWrap1">
                        <canvas class="sig-canvas" id="sigCanvas1"></canvas>
                        <div class="sig-placeholder">
                            <div class="sig-placeholder-icon">‚úçÔ∏è</div>
                            <div class="sig-placeholder-text">Toque ou clique para assinar</div>
                        </div>
                    </div>
                    <div class="sig-actions">
                        <button class="sig-btn danger" onclick="clearSignature('sigCanvas1','sigWrap1')">Limpar</button>
                    </div>
                </div>
                <div class="sig-box">
                    <div class="sig-label">Assinatura do discipulador</div>
                    <div class="sig-canvas-wrap" id="sigWrap2">
                        <canvas class="sig-canvas" id="sigCanvas2"></canvas>
                        <div class="sig-placeholder">
                            <div class="sig-placeholder-icon">‚úçÔ∏è</div>
                            <div class="sig-placeholder-text">Toque ou clique para assinar</div>
                        </div>
                    </div>
                    <div class="sig-actions">
                        <button class="sig-btn danger" onclick="clearSignature('sigCanvas2','sigWrap2')">Limpar</button>
                    </div>
                </div>
            </div>
            <div style="margin-top:18px">
                <button class="btn-submit btn-salvar-alianca" id="btnSalvarAlianca">Salvar Alian√ßa</button>
            </div>
        </div>
    </div>

    <!-- 4. APTID√ïES -->
    <div class="section">
        <div class="section-header">
            <div class="section-icon">4</div>
            <div class="section-title">Aptid√µes Naturais</div>
        </div>
        <div class="section-body" id="aptidoesContainer"></div>
    </div>

    <!-- 5. INDICADORES -->
    <div class="section">
        <div class="section-header">
            <div class="section-icon">5</div>
            <div class="section-title">Indicadores de Crescimento Espiritual</div>
        </div>
        <div class="section-body" id="indicadoresContainer"></div>
    </div>

    <!-- 6. MINIST√âRIOS -->
    <div class="section">
        <div class="section-header">
            <div class="section-icon">6</div>
            <div class="section-title">Cinco Minist√©rios</div>
        </div>
        <div class="section-body" id="ministeriosContainer"></div>
    </div>

    <!-- 7. DONS -->
    <div class="section">
        <div class="section-header">
            <div class="section-icon">7</div>
            <div class="section-title">Dons Espirituais Especiais</div>
        </div>
        <div class="section-body" id="donsContainer"></div>
    </div>

    <!-- SUBMIT -->
    <div class="submit-section">
        <button class="btn-submit btn-objetivo" id="btnSubmit">‚ú¶ Objetivo Alcan√ßado ‚ú¶</button>
    </div>
</div>

<!-- FOOTER -->
<div class="footer">
    <div class="footer-verse">"Assim como o ferro afia o ferro, o homem afia o seu companheiro"</div>
    <div class="footer-ref">Prov√©rbios 27:17</div>
    <div class="footer-ministry">Minist√©rio Apost√≥lico Si√£o &nbsp;‚Ä¢&nbsp; Vis√£o Celular M12</div>
</div>

<!-- SUCCESS OVERLAY -->
<div class="overlay" id="successOverlay">
    <div class="overlay-box">
        <div class="overlay-icon"><svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></div>
        <h3>Salvo com Sucesso!</h3>
        <p>O plano de consolida√ß√£o foi registrado.</p>
        <button class="btn-ok" onclick="document.getElementById('successOverlay').classList.remove('show')">OK</button>
    </div>
</div>

<!-- SAVE DADOS OVERLAY -->
<div class="overlay" id="saveOverlay">
    <div class="overlay-box">
        <div class="overlay-icon"><svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></div>
        <h3>Dados Salvos!</h3>
        <p>Os dados do disc√≠pulo foram registrados com sucesso.</p>
        <button class="btn-ok" onclick="document.getElementById('saveOverlay').classList.remove('show')">OK</button>
    </div>
</div>

<!-- OBJETIVO OVERLAY -->
<div class="overlay" id="objetivoOverlay">
    <div class="overlay-box" style="border:2px solid rgba(46,125,50,.3)">
        <div class="overlay-icon" style="width:64px;height:64px;background:linear-gradient(135deg,#2e7d32,#4caf50)"><svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" style="width:32px;height:32px"><polyline points="20 6 9 17 4 12"></polyline></svg></div>
        <h3 style="font-size:1.1rem">üèÜ Objetivo Alcan√ßado!</h3>
        <p>Gl√≥ria a Deus! O processo de consolida√ß√£o foi conclu√≠do com √™xito.</p>
        <button class="btn-ok" style="background:linear-gradient(135deg,#2e7d32,#4caf50)" onclick="document.getElementById('objetivoOverlay').classList.remove('show')">Am√©m!</button>
    </div>
</div>

<!-- SCROLL TO TOP -->
<button class="scroll-top" id="scrollTop" onclick="window.scrollTo({top:0,behavior:'smooth'})">
    <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"></polyline></svg>
</button>

<script>
// ===== API CONFIG =====
const API = 'https://workflow.autrix.com.br/webhook';

async function api(endpoint, body = {}) {
    try {
        const res = await fetch(`${API}/${endpoint}`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(body)
        });
        return await res.json();
    } catch (e) {
        console.error(`Erro API [${endpoint}]:`, e);
        return null;
    }
}

// ===== SESS√ÉO DO L√çDER =====
// Pega lider_id da sessionStorage (vindo do portal) ou da URL (?lider_id=xxx)
function getLiderId() {
    const params = new URLSearchParams(window.location.search);
    const fromUrl = params.get('lider_id');
    if (fromUrl) return fromUrl;
    try {
        const user = JSON.parse(sessionStorage.getItem('siao_user'));
        return user ? user.id : null;
    } catch(e) { return null; }
}

function getLiderNome() {
    try {
        const user = JSON.parse(sessionStorage.getItem('siao_user'));
        return user ? user.nome : 'L√≠der';
    } catch(e) { return 'L√≠der'; }
}

const liderId = getLiderId();
document.getElementById('userName').textContent = getLiderNome();

if (!liderId) {
    alert('Sess√£o expirada. Fa√ßa login novamente.');
}

// ===== LOGOS (base64 inline) =====
document.getElementById('logoSiao').src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASoAAABgCAYAAACqjj+RAAAlaklEQVR42u2deZwkVZHHv1FHDwyXsIAKLnIsIoKCi+KyICoIC8ohl66Ku+p6IHKICsoiIijKjQIjjIICgyAyIIecojAohxwOoMKCgKBcgtwDM9N1xP7xIug3SVV1ZVZWVXdPxudTn5qprsrM916834s7RFWVgoZBNaAKzBCRvVS1KiK1YloKKuiVVCqmoKCCCiqAqqCCCiqoAKqCCiqoAKqCCiqooAKoCiqooIIKoCqooIImOVWKKSioE6nqIjwiIvUhPIMA5Qw/bYpIc4LPbxmQdn8WkUbBhQVQFbTohklK2I0kMBlwSQtA6NuGEhEF6kOeH0nulzzi3gogKoCqoM6brmQndjPaMI0W390ZUAOnpohc2CXo9bwJVVVERFX1NcC/A80uzRX+vbtE5P9UtZRFslLVko2jaWBZy2u8tgYCvAdYLppjon8/LSLX+jwUQFXQ4gJQJaBskkDDPhsxaWUPYDP73NWspYHtE9c4Hxh1icu+eznwE+Onum/YSPqqZ9xoZXu2TYDzM/z+SOCrdp1myrkaEZHRCIhWAw6PxjwP2DOWJm283aprJRFpqOqpwOptvnM38CYD3UYBVAVNdelJIumpqaorAusB7wb2MTBYuc0lYilCgF1afOfDwPH294Wq+nFgoYjMafMcaUFroT2Hpx2NR/69F7LOl4iMquoawPuBQ4ARYNnE13cBRlX1E8ACEbk2KYl1kMBEVVe3sY1G8xsfAEV6WwFUiw/5hlHV7YCtgY2BdyT3T5tTOwkM9TZ89E/R/6+0+50GvAQcLCLP+cbLkNco0XNUu/xNlZRe7UjVLKnq8cAHgVU6jH0Fe7/cfv9j4MwEYEksYRkQNu0+nwHWaQHAFZMAj4vWpgCqgqakJFV2KUpVNwBOBTaM1rxuG1kiMKj0wDPxZvKN+T/2vrOqLgT2B64VkadNTWpmlLD6JnnavJ0P7NBCuqm0GXPD/v0J4COqejOwj4jcHqmETVP36qq6vKpuDnzGfltpAcxl4NwCqExPLrb01AQpEWkYSJ0G3A68zTZELdocDlSSh+AWvSrRvWrAqsCaBgBzVPUAEam7kVpVqxNg2iqm3l1sILXAwKWcUMtajbliElENmAa8E5irqqeq6jbRWOuquhJwDXChSaHJ8AQH+cuAihvqC6AqaKqBVNWMtB9R1TuATxrzN+1krpItJikLVe2lkWq5PnCkqs61Z1xeRGom0Qxrzkqmiq4NbGtztUSG/RGPtW4S5cU21jtVdS5wK7AB7cMtmsCLhPI/z5oUVqh+xdaeciBVU9XdCF64WHUZJjkIufetYWroT4D7VfV4EZkxLJAKb7oh8AuTijrNV32c/SPR3+oGXhu2AKNKm2uXgduAy4saZYVENRVBasRA6sNm26hPEJBqxXPVSMJbCzhJVc9V1RXMkD1I6coDXXc3FbXdvvA4qkoL1VY7CAJqY41fpQ6AXgIONCmqCAYtgGpKgVTZ3Om7AWdHm6Q8wXlPbDPOBz4AbG4buzSgeXOV71+Afe1Zqh1ApApcbQfBxZFqKx3AysEnftFBmrpBRG7IGqRaqH4FTVSQqhBio7YDfsYrvXmTgUZsg17ojoAh3N89c0ly+95fgINEZHY097vYb2cCy9jcZ8lLXECwiV0LbB95CQsqJKopAVIenNgEPhad6r2sq6sc473y2ki+sT9n9qJhbNAz23zu9qpvAhuIyGxVFVWtGqCeLyLnmMp4YCTFxupeO2pGqt0SwA3AViIyj5BjWQBVIVFNGRKzS51CCE6s97CmDj5pvIK1CBjLGe9ZBmYDD0Sg22pT12iTaxdROSNIL233GI3G4c/xEDBbRBZYulHNDdxeWUJEXgCOUNW/EWKptowk2nbP7Crms4Q0n7MtfKFcJCoXQDXVpClV1dWAj5DdcO7u9LK9ngIe7GB38c+XM9sOiY3drUTn930OOFVE5idLykS0ZGQPGo9io7V2mD/3kB5JyOMrmWSTpCtE5G5VrXjuX3RK1KO1KIvIT1T1Z8BGwImEmKo3t3mEPxLSZz4vIr+LrlmAVAFUU4qqZkDf3ySCWgagcg+UEIIx5wKXekT1OEC5DPAFk+LeA2zVQtKqjnNvAW4XkSvbuOId/O4EvtYBjF1l/C/gDQYQRO8t728A82vgAOAW4KLoWhBSXb5jhu16B7FWgbqBWQ24CXi7zdNBLQBagCOiZOYq2RO3Fw/VYZL19dPoVJ/slLmvn8f+EKLNLwWW55URzt2qXY8QKiTcGW2ccQEvkb82HVjDAOuL9u8YaEodQHJDAyLp1S5jUd8rR9d+QkSebFcmJcrtWwd43PIRW34npaTrr2an39o8NwuAmloSVVyvp9u6RFPZNtW0Q2YlxrxNaUHqQYIB9z6LX6oSDLmNLjek22heAv5kr5NU9QiCN2w/+7p7IkuJ+1/ZDUh5eZouJuVJ4Mk2Ek9LSchsQvdEkk3yO7WUC+MqLW54b/PVeqHmTT2gcpCqA88zlrW+uJKrLceRPu7I5/JB4J0i8rCpLHVSeNziQnKRFAEhyfir9vk5wGcZS05221GZkEqyvf27Mc69mt08m1criOdpPGnF0o28iGCuUeCdiu0VNPWAyl29zwL/afr/bwj5UgMLDpxg4pSf2BtlUIM9IfmjBlI9p2nEUkQkmYiI3ALcoqrPGCitY2tZB35kxuxKXqpPVtWxm98l67ZnqR0fX2MYtefTPmPa54ydIXmPbzIAlTPR70XkapuQmcAJHewfU55UdRoheXV6hp/XTSrrS9xS5L73Tbm/1Xe6ilCw7xkROdnsP/Uuxlo2VTIt1XrdMJHqVo+vZXM3LWGS6CjFish8m/tYna1PoDI37gyoJ8Cn2mGcL48tMT/xvOniAFQuzn8uWtzTgS8TjLYTMZ+tnwzlEtAMYEW6r3pJ9N0TCF6ucj+TXmOvlog8qqpvBT4EPBnXo+p0Qhvzb0WItUpb4fNbhPimNI6KRerJx79T1fcx5hU8FFiX7uylDaCsqicAv7V5vyQ+JMarCtonXvJxek0wr2KxLWNhKEfaPmsHVD62S4BZhikLROSqdveaikDlAYyzgIdtohqmMhwGnMHim7i5JNm9n6ORbWYQqmotyqs7KyOfLkX65g7TUm5cB8bYo3mi3XslYLsep+LA6LqzCaWSDxGRv0VVWAeS45cMLLVDZG/gtcA2GS75n/by682y/buPiMyLxpepUcVEBiqNXqeJyMIor60E/BQ4wiZ2cfQC9sLMg65QEJdDziI5xDWeupGo/Hvd2p48FamuqksBbyGUaz4QeHVCUnNJI204iK+ZP9Ou9r6jVT/9OiG49OF+Rqe7xGgH1TrAboQmFUsxVhM+HmclxRr5MwshpQtgO1WtA58H5lh115erz04VoKoCu4nInOi0I7KtbE7IZv9nipCFVLabYd24B2khjk/q9rvjbtpEOMFehIYN706Anqs9vVYiLUdmCr+ue7B/CDykqluLyL29qkrtVD2b/4aq/juh1vuyCb4oZRynJPaf89hK9n4BcLuqvldEnmol1Y1n/5moICXAfZYIukhksA9ORO4DrmDMM1jQ+AdTnVCrew2TThfLUrfubVTVpVR1K1W9m5D28m6bo2YkUVT7cKjHRmqXFl8PXK+qZ/vGz0M9t3iussXerauqvyQ4NpaNADPv6q/VFuPbELhDVb+rqmunMT9MVKBy0fOLbTr4YqdCiRAJXWYxMqj3ItDYa3lgzzSR6FNuIoKat5xJ5FcBb2SsokFcT35Qa+LOhRUJ7cfOj9an1+dwVe8I4C7gvabqORBLH8caj69BqDSxL3Cvqm5n4FmdjEDlBvTr7SW0MJibSCyEjPeD7d+LU3BdVhuGN/X8kqp+x5pANCZIg4V+S1GiqmVVXVZVjwVuBv6NsS4yWatA5EWlSPrYUVXPM1VNsoCVjXfE1vebwFdsjzTpLqwibypHtqw6cKGq7mLOlupkAypnmFNF5Oku9PSm6b9PRv9fHOhVPaodo8BXVfUEVX1XFPskU1jCcgPx6gQP1RsYS+aWjLxa7/DSjM/o67OrdaaG0JEm7TN65dcjCEndHrYxzMKKEmlAZWC2SVYdwWqiAZV7a74oIqePZ2yLbFV3mW2hGjFQK0BbJJhtkpI//yHA04zV5U5LI3ay7Q1cpaqXqerrLKamoaojXiBuCql7Tdu8dwLnMNahOO381yLzRKXDy6X8rOtTB3YGfmIHSVf7NZKk6hbG8xW695gOErA8S+HnqrqTgdVIu5N1opCX/XgAuMATZLthPgO0u1T1csbaHUkLUC5FQCaTdLOpvd+hqkvTuV53t2rgiM3bfap6hm2M61psgJeLyk3WjP+oNddBBLf8EuPwgztqyi32zPOEMjHJCH9fkw8kwCEt35UN6LZR1TVE5C9dxll5S/ojCSVsRskW2d9uLuLn61XV9fm4QFV3EJFLWo1xIgFVwx76XBF5yKKJu1bjzLB+MCGKOc4B9Mj1O4GjCK3M96a3apjDtrX4Ah9KKJOrPTBN3CllGsEj+BkDLG9mcLpLWtEz5JoiMXi8koWq+i3gcNpnNziPlKPD7yBCQncZuFtEbuuwTlsT3PNfAt6auGYaNWk54FpV/Q+CEbotWFmsoZokdUB0EPUCTi7FJ72CcUnqrNKaS1YNk6zeD1wdhyP5wCYCNVS1qarPqOoyWVyypqYsoao/s2uO2nvN/n2gfe8tqvqSfd4Y4pj9+U5KbPxuxlqx97cnrpUH1W0tYnpSVS9W1c1U9T0WFJlUNUp5t7qKxvn+lOP07x3cam7NoC6qupqq/jUx5qbxRcwbc1T1Taq6Yhu+q9j7Iq/oO9NtDAsifk9DNXtf35670m4P2Ptu9v35LdYyzZ5MPudCm4vf2HtMzeiVhXyMZ7XcDxMEqPwh/zeSGLJIGajq5qr6dAR+DVV92v42Yu/vtEmvT1Kgcu/Vaqr6W5u/PMfStGvW2vz9t6p6vKqeqKortHi2ah5exH4BVWJTf8d4ZLTFeGep6g4tQK5ir/I4z1+OQcVAfkZ0IKQFjZk+x214omoH/Zw2QJPmsHKap6p7q+q+qrpl4p6ftM+/1Wb+s973ewlTw4QAKh/UzLQbttVi2fsD0QmgqvrR6MR3QLuhx8UcGlAlxjpdVZ+zRe7XWBzw6y0288Oqer+d4m9uI2llda/3E6gc7Fe0g60WHZo3WnpJLDVlGkMLYFzLnq+RQvpwSWVUVVdtBVbRXF2WUWrTxO/+rKoHqerrkvdJAnA0rreq6j86SObdkEud+8XzNmyvn9uSngJm5dDPTBLvJbNNXRP/zZB6byZxyk1UnfIl4GS6KEDX47x6jJEH7rnna1VgTUJPwTtV9RxVPVhVDzG7VtOz8zs0bxiWU0JF5B/ASTauHwM7isgmUdXPiojUogoDvRjxR8xZtB2hl1+zS0eIF40sm511Efuy8UHd0mI2NuN5VlAtEfoLri8ih3vNsqhFWN1i7+qJz+8XkbnAOwkVF7KGfHj2xIdV9dV4bu8EsE01VPXSV4h62U/ffaITdZ6rJpEE4ifpMqr6PdPj65NNomox7iMSUuSgKLbpJOfxj6q6p6moS0QnsqQcW+4SVQvJ9F9b2LBy9wxHEv1NKSUfH9NpyRLHkX32lIyql6v6f1fVK1R1SZOE06yVxCYbVf109CxpJSuXbnfz9Ri2ROEhAz01n/SMcFVdlpB+4IB3hmdrR259tRPhBRHZ16Q5YZIGitrJVrHyv16rvM7gyt/ELcs93KFmp/p6hLpZDwEXq+pH7UTWNJtgAJJpSUR+b5uzbPyh/fJm2oH8qUirSEML4+eKyuesQij7nCVeaqFJMl8RkW1s7dTXqtt5tFChkqouISI/BP7bniVt7KJ7WU+2azeGCVQNE3+PIUSVS4+i9ShwGSElwunbUceWVoZOAfZn8lddaFg4x4HA0QmX+qDJk21HItVGLWzkLFU9QFWXiwBrIoBVMyo90hjA/RoZVHVXiXZU1Y0J7bnKZmYuE+rnZzHnNAixZFcDV5iklhmkTdVfYIfnmWZiyQJWJRvb9GHaqDxm6i4R2d9OiUwMYieKmn7ueVsvYJUk6dx9VwilLv7AJK7AYKeZ1x8/gBC1PpexQMRhFRf0eC/P16yb/eJBVf2wAZZOhOh3l6IGDOhpxu1BpKsAr45yXR34Ns7wDB7I+itgGxF53OxxeewDTza+GPhzSq3FI/pXxEqOD1OSKAFfz+FErdiEfC0az90i8jM6tH6yhS6LyLMDMEYPUg0si8hhhB57ntRdjgzgwwrOdEO8EvIUzwZ+papLDrLaaF52plZxUy1e0vrnWgbuJ5RXLqXku7izTdmA/uOEJrSNlAZsV9O/7mlTeUqp9v5X4FwWLayXhkZUVYbBHI7i94jIpfSQAhK12d7ENuaoXfuz7VS+xGTWjGnOIHh8evU6TgSwati8PEfIf3yPnZhlE8Elkh6HMVaJ7CIbAb+0rss60cDKbVaxYd2K7TVN8hjvpQknjkuYVTsgbyW9fTQuyeLztRmwDK1Tx9pRzdTzK4Dfm+lgNGderNmYjzAtp5pirK4ufgjYdtDu4pdVPmDLqOGl9sBMI8BXCekfQqikkEbUbIrIS6q6D/AJpgCZZOUdXuYAc1T1Y3bqHkpI65CIYYdR3mSa3XtTs49sDbw0UQ6Kdg0hDHw2J1RfaJd649Vmvy0iD0cSvPP5AuPbZXN63GfTDs+e+3ngWLMplfrIjy+q6uGm9qfVoEaAkUEDlS/Wz0Xk8bT5fC2kqbqqnk5IqF1gEtVpIjK/235xxnhV++037JWms8uEtVtF9cBLIjLL5m02wTP638BrzOZBC7Whn8XU4lOzZvaVn4rItq/I8RosOMX102sW7Lgy8Gng/REwrUx3jSM+qKovRb87zg6OJUTkRlV9qsdHXqCq7yDkZ6bNXS0Bz4vInFhV6yNdQHCcZbmPVAYMUhVCEuvXIrdqFoYqEzxdGwBbGEgtAdwqIpdlaKrpatD5JlVNiYYR0SnetJgksbbnJwAnqOq6hCYDbwQ+0kY9gLGSJf2yXY0Cb1PVTYCb+9ncoANAeU87r59+CPBfhGBWOsxNJ/onezkdH93zCODt0RxkPYyWNLWvnmGNlhnAXLtNboGZILYgfYu7lyoDBKmm6amf9wzvHq7nqsouhMYOo8CjwF4mwtZTLrjbdf5o9aQ/ZdeYMs0iosYYsdRwN6H6Aqp6tG2+zxAip1/Dos1N64lNlRdweTOBFQklgdcE/jEoe1XU4KFmkdA7EVzqb0pImtJCGuyG71tpFJi5goStKQs1M+wltxN/1h0Z/ZKooji1x1T1F8CWLFo2Z7xDDGDmoDaib/qLReRs2ySNHhirZhLUwQSj7AjwZRG5w9QczbKRDUA/R3CpTnrDejvGMWNww71X9vntIvInEdlXRNYitGA/0dSVZ1m0GJyHG+TlRfTrLW1AKQMCKQ9tmaaq+xJCOk42kKpFGyoOs0ijEid/4wes15nKS5JJO1++ZvfmfOiMJ7Uul3Fcrx+EROX5fAuBw7NIPMkT2MTdGYzVUJpLcHWP0GPddAOsowgF8CvkU3BsooJW09TCePN5BP+vCUXhUNUfEPrblQge0ukmAcU1sMs5bDYlNKw8vN+BoHZ99zReALwvkja6lZh6tc8Nm6YP8oBU1azA3BwEUPmpNNv6lWWOQHfbk8WN7A7MtwX/sYg80a0BfRyQGgF+Z5t0OyZxgb0MtqykHdCbhd4DeJLu6vaVEwjxULtHINWLXc+Bqq6qGwG/75fqHYUJlCOQmm9SepbI7m54biLy0GTRGEr9Vv084/syQjb0SA/M5Sfg8qae1QhtzeeJyImRO77nZ7brHEbIA4ThBUkOE7waHg8UxROVPQdORPYWkY8RYrV+SLATlnqQaF39W4XQVRf6EDIRxUE1gIsI3ry68ZKk2OBePaJM57rp/vLv1ykoNfUT5X1zzwPONNGvl1rbJZN4to1sCH8zAPRAskYOG9RrsN9iktslTIFwhRxUxOSGr9iaeJzWoYRyOmvnoAo+3I88QLue53ieD3gC7khKno7r798F/JXOgcsVMyW0up4UMDR8oBLgLyJyrteyychgZTP+7gicRXB1VoGLROR6UwnzdLE2Tfq7mZCGsmlOdpipBF71SEVERB6xQMidCfWdsqiBnki9s6rOItRuyvmxpW5NQLZhLDq7G4oPq18bH1aB80TkmS54+JO2H9YhJMJTgNTEAaoysEc36SzjnIJiaRYft489UPDrkRcwV5uNSX9PqOo5hFSPohtzGxXR7T4i8jjwfVXdm7HOw2nAyh0t6wGvE5E/563yWRXSbezg6VZK9u8+Y/asuSKyMLp2tY105J81ReRH0fe/S2jffh4hZk+GBFoySe7Xt1gVjz25klBhs5eWTg5y6xLaDy00wPienWTSpw1Yt803wxg0TZ7SQCmqly1DBKym1ZiaRgjqu43siahNsvXc60QOSkeRLvbInUFHAVuJyE3AaJR4XDJbXr1Frp9/1kh8/1ERudEkz1694L1U/VgwYDbJuqZ9SUrW6CQ9TUTmkTG2yRnFTu0TGQtHGAVmRN6bfoJAmRCh/CSLBuxNGJDyMi/Dru9k6qCKyGOEhNusNbHyXteq9bl7FyGBvVs13kNr5gEHi8htkUOhlqYkSvx9a+5aIp/wgJGMKjbADww4G33kzxLBk/tG4MvGD91qcv5ce/ULqKrA/iJyntec7sE2paq6BbChLcgLhLCBR+khcLRbKYFQSuNqYCZjgXoTCqQsYHF/K5ky7PpOmuMmzIvqFnv3eULQYTdA6AfuY4QKFGrdh/PgN/UYth4nugL8BbiFbFVqVx9Ajp+Hv3h9qTQqoK/Bff0AKjFV6Xt2umeNQC8TjNrrE8Ib/Fq3i8gvY/tIn6lmDPED4O8TTQW08suXmmpyqaq+xlOChlU2JY9NmPPzjBLy4Xaj+2atrvJdJyK3GriMMrFoREQeIMT9lVOokN4sYmlrxFHqY+MNPzhPyKiNlIBX5c3INZuEA13E60HlcwPjJxnLVHfjfHlQKljUreRvwKwe7W15rr7XljqUkD/1op38j6nqN80+0nTJi8lFzT7McZN0ibtebHBPA/xGzusn9B7Q6gUHfwc8x1imQLfzMQ1Y0/ik1K/9YwLFW1Kq815b6x7g3jwfzhfyN3bCQ0YjYRS8uSSwX8S4pxBiVhgwWLg6862IiYcOVsZgXpt8JJJivmb93baM1OeRASb6lnpkfE9UzpvKPcxzPw7AF3PYcyoiZxEi69PwpRem20JVN4sknzz5oGx8tychiyFNBVIPFv+diMwt5cwEVWAHKxZWIuTllVO+qkDVagFdTvDylYCHRORzjPUsy3LtTC+7X8XuvSshYr05LLByT5OqfoGQxOt2wVLEwNsSqhHcoKoriMhoJGGV+2jH8kz8lzJKPUKIn3piItRSz1vSiCp+Lkuwu2qv97B5mkP6SqElYDXgsrjETU7j9KT+fyHk5U4nnZOkbOA7N8++ft7P7dAcB/qpROfU900gu9DlGdpy96Ol+2jUl63VmnjPuFtV9QwLmF1Efcyj9Xp0Pe/dt6F1T07bvdnH46Vnptt7T3397BorZugvV4/GJDluYKyrcFoe8nFt79eK+gSumZEna/b6kl1nJC8wtn/Ptnmvp+wzqKr6vF8nLwOaI/HfVXVTxrrpZrFLKaFE69GRHg0w30TUYZKL1q+NnnfgtimTpo5irFtHtYOa0yQErG4E7K6qfyDUW1ooIjcnGKtlM4KknTFRbSFWZxZYMb5rTNTPmiKyqud2DvM8smffSFVvzMPcEHU0fi1wDtlrnv0jXgP7d5XQP/F1KefdQ0iOUdVpIvJtLxFOhrZZroGoqgI/JdSMS5vY7/ec6061vIDKrzOjj4zz6wlo9C0NGKRKZkBdm1AvqhuDrBuCm8bMGwDX2fWOB0ateWnbjZiUulqpCRYi8R3gowZSWZizTPCsnpGwew6D3Ot3rIj8mwWyLuxh7aaJyEJV/WdCjfg32PhKGfhtXytl7HYcEZF7VHWm2VHTNCGNuxQdrqqjInJM8mDsQoKqGLB5atVFwA5ky5P1TIAvmAe7nLdLstuSF90ivfTp2nk/26CBcXtC8m+3TFBOGFp9g+xnTLWrfX4XwWPrrm4BHrGOKTFjvgpYlbG+gTsQuvS+PgKdtLzlthoRkTnG/M0+gU+3a1wH1lPV/UXkaK931q2UEUmqJQOplYBrCVVMs+SO+vc/pKpHi8hthBixkkkePwD2IlRnzZK+1ACOVtXPAnsAN1ljhrgibxz07GWAvIgilj61H7BGdDimIefp84B7HSgrfdjA/QSHxZaijSuMpYGkZQJJSMB+Uq4VvW+f+M3t1hCiFG323Uwya8Vk5R4lzdP7FH4iGXioQqg6epSqNkTkuFjCbCdpRPXp/e8NVf0KoR7/mvRe42wUuFVVfw78nNAjUUTkKVX9vklVjYzzo2YAvxq4XlXPFpHvdxBM3K71ZZurA6O/pZ3vl7v0AKcaSJbztFEV1H+qmG3qmAgwelU9q9G12tGG9molnbS7Xlab0LPAcXk3JDWD+DOEJrXftE1USfFcNeBYOyxmicgTESDRwlbn6s9KBBvroYR4wKzSZpJGDKx2AtYWkVlmWK9addRXmx0yi9oV933cFNhUVT/BojmPN9j3TgNWIHj01k3wRRbBwlW+3UTkqrjxRAFUk0OaKhGi9Nc1NSvvbPvSOOpSo4V0m6d9zjfUSQRDcTVqXpmLNG6G/gfJ1vBzxObgGOAgVT0QmC8iZ7ZZrw8CywP/S3D/d5I26xmlPVdNn4jXysDzbEKlkaUySjax3QrgbdHfzu2whr0cVs4DfwR+Y1JrnYQKUNDEprJt3E3NNvUSoWzuoOxi/XQauDp7B6FbtZJ/FUxPg7oG+AOwfoYN7N6x5QmBx1hTV20hjWzVYozVDuplZik7/n3UUeYmVf0PQmxVuxI0acwtjQQ/SDQuv3a1Rx6o2tpsISJPe+ONAqgmERlIVUTkVFVdxVQJerAFTCiB0fjwAyLyYC819cezfYjIo6p6JqHFeNa8M42koPeOI4V6155SB4C+jNA44215qPNWnaFqXsH3ErJEppPOkdAOsNJI4t2S2+vmEsroPNWqfVepgIFJA1Z1ez+MYMy+LmKiBsN15Wclry12KiESvdoHkHp5/mwDHGP3zdoOzaUHjxWsR69GBGLVcaQYB6qdCK3OyWsNo4PtOpPuamQvudNPakbrcJSB1LRWKUsFUE0+e1VZRGYTEpE3I8SXlSNGHFpqT0oJp0EwNJ8sIp8mpEv0u/GBmIdqB8ZSfHoBh2RjhzLjd5V2V36FEEogkR0rb2CuWqG/rRnLK6xPkPX3YNd7bPyXmDS9sF+iW0GDlay8q3NdRK4XkS0JQZaXJ+xJNSZmRVKvsFEGfiQie0Z117Xfc0foMvQr27yDljQ8QLMK7CEiM6x0TL0fz2CSVTWSrBZGkmBjiCDlZqc7gXeLyCMi8mKn9S+AapKqgZbvVzJGPNukhI1N13fVI45KH5ak5QGC/gxV4P+AtUTkf9yj2W+QSthwKiJyPSFxe36eatc4EmQF+BOwp4jMtMoCFYIT4V6yp551owbeaOO9PSGBD1qKEkJoxfUGUo93490tgGrygpW3Zq9FEtYtIvKvhNLJ3wDuZ8wl7t6aGoM5TRuR9CQRaB5C8Ow84EbTQYFUAuhHROQa27xuK+uHpBFLkBeKyPoicrKp8KOEtJMXgO/S3/r/ZRGZIyJvJfTFvDYhfTf6CFA+Bw7E24vIZiLyTCvDeQFUU1/CEmPIWSJyKPAuQgT5TOBBxtqMeQyOv5Ts9eA1ITXVEyrOPLv3McCbReQwEXmsWwZtc59uX53mbNQAfg6hCemDkaRRT6gpWebDjetV4BGCV2+XaI0cGJpmm5nJWPG78e6vadfMTAZiYz7FxnwlobR3zBMNeusNkOQFl+4fIwSLriciv7TqH9ItDxThCVNIwnJJJkrheMQ2yR4Aqrqd2WY2Bt4xji2lW/6JpYDYFX8tIS7mAhG59mUuHsuXSxt06YGX3dBINwdxJGlcA6xhpU52IkRk+33TGJ9jG6HvrROBE0Xkz1FsUCNeN1fh7WC5Clh5nPvH8VPVlDxSt3vNF5FtVHVjYHdC2sy2PfBCElOcF14ATgcO8f6HCaCmAKrFWMIyhijFJ7OI/AL4hSUVb2in3pLGSL65V0jJF08zFst1DaE2dhW4QUTm23PI2KNlqjs+avfpNiXEv/diF3Pl6ToiIseq6inA5sCPbE5WSPmsT9vhsDehMsWNvhbtwNnsZnURucOCercnRLVPI9R6T9ICA4Cy3S+L3UpMorkZuNkOkE0I/Ri/bWu6UgaMeNKe62ZCvNozInJnzI9Zeh143ZiCBk++mWaIyF7dlNPo2VgQGKWcvI99XrHTc3fGGnSWO9ifyoQM94vcvpPciF7XqNdSvu3qX3Xz0zT2L7f1RXNSAr5PSLbtFN3tgZr3mW2QqJpq13MQg5l5QtckBPc2IxtfmVCr7Y52894rTxho1Ql9NHdl/KBin5vnCJ1+FinfnAdvF0C1GAFVYuOXYqkix2u/XLBv0EbyPOem1zmJQi4aGYCDQbSxasMTmte9vQpGHtcrVL/F157V6MBc3TpZmsmNOKAWZgObm5SlmjXKIGhkvH8zAR6t9mgjbyBrxRMpeeFltbIfvFAAVUG0AJpGMROv3HhDAs1awQtFeEJBBRU0CagAqoIKKqgAqoIKKqigAqgKKqigAqgKKqigggqgKqigggoqgKqgggqa7PT/7O1VdcQTaz0AAAAASUVORK5CYII=';

document.getElementById('logoM12').src = 'data:image/png;base64,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';

// ===== DATA =====
const modulos = ["Novo Nascimento","Arrependimento","F√©","Obedi√™ncia","Batismos nas √Åguas","Mordomia Crist√£","Vis√£o Celular","As Sete Dispensa√ß√µes"];
const aptidoes = [
    {nome:"Intercessor",req:"Escola de l√≠deres completa"},
    {nome:"Conselheiro",req:"Escola de l√≠deres completa"},
    {nome:"Palestrante",req:"Escola de l√≠deres completa"},
    {nome:"M√∫sico / Cantor / Ministro de Louvor",req:"Escola de l√≠deres completa"},
    {nome:"T√©cnico de √Åudio / Luz",req:"Escola de l√≠deres 1¬∫ m√≥dulo completo"},
    {nome:"Operador de M√≠dia",req:"Escola de l√≠deres 1¬∫ m√≥dulo completo"},
    {nome:"Professor de Escola Infantil",req:"Escola de l√≠deres completa"},
    {nome:"Introdutor / Recepcionista / Apoio",req:"Alian√ßa de amor confirmada"},
    {nome:"Volunt√°rio em diversas √°reas",req:"Alian√ßa de amor confirmada"}
];
const indicadores = ["Participa da c√©lula com frequ√™ncia","Frequenta os cultos com regularidade","Est√° pronto para ser enviado ao Encontro","Concluiu a Escola de L√≠deres","Iniciou o tempo devocional di√°rio","Compartilha sua f√© com outros","Est√° pronto para ser um Auxiliar de C√©lula","Est√° pronto para ser enviado como L√≠der de C√©lula","Est√° pronto para ser 12 de Gera√ß√£o"];
const ministerios = ["Ap√≥stolo","Profeta","Evangelista","Pastor","Mestre"];
const dons = ["Palavra de sabedoria","Palavra de conhecimento","Dons de cura","Opera√ß√£o de milagres","Discernimento de esp√≠ritos","Variedade de l√≠nguas","Interpreta√ß√£o de l√≠nguas"];

// ===== RENDER M√ìDULOS =====
const mc = document.getElementById('modulosContainer');
modulos.forEach((m, i) => {
    mc.innerHTML += `<div class="modulo"><div class="modulo-name"><span class="modulo-num">${i+1}</span>${m}</div><input type="date" title="Data" id="mod_date_${i}"><input type="text" placeholder="Ministrado por" id="mod_by_${i}"></div>`;
});

// ===== RENDER CHECKLISTS =====
function renderChecklist(containerId, items, hasReq) {
    const c = document.getElementById(containerId);
    items.forEach((item, i) => {
        const nome = typeof item === 'string' ? item : item.nome;
        const req = hasReq && item.req ? `<span class="check-req">${item.req}</span>` : '';
        c.innerHTML += `
            <div class="check-item" id="${containerId}_${i}" onclick="toggleCheck('${containerId}_${i}')">
                <div class="check-top">
                    <div class="check-box"><svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></div>
                    <div class="check-label">${nome}${req}</div>
                </div>
                <div class="check-obs"><input type="text" placeholder="Observa√ß√£o..." onclick="event.stopPropagation()"></div>
            </div>`;
    });
}
renderChecklist('aptidoesContainer', aptidoes, true);
renderChecklist('indicadoresContainer', indicadores, false);
renderChecklist('ministeriosContainer', ministerios, false);
renderChecklist('donsContainer', dons, false);

function toggleCheck(id) {
    document.getElementById(id).classList.toggle('checked');
    updateProgress();
}

// ===== PHONE MASK =====
document.getElementById('fTel').addEventListener('input', e => {
    let v = e.target.value.replace(/\D/g, '');
    if (v.length > 11) v = v.slice(0, 11);
    if (v.length > 6) v = v.replace(/(\d{2})(\d{5})(\d{1,4})/, '($1) $2-$3');
    else if (v.length > 2) v = v.replace(/(\d{2})(\d{1,5})/, '($1) $2');
    e.target.value = v;
});

// ===== PROGRESS =====
function updateProgress() {
    const totalFields = 4 + 8 + aptidoes.length + indicadores.length + ministerios.length + dons.length;
    let filled = 0;
    if (document.getElementById('fNome').value.trim()) filled++;
    if (document.getElementById('fTel').value.trim()) filled++;
    if (document.getElementById('fRede').value.trim()) filled++;
    if (document.getElementById('fDiscipulador').value.trim()) filled++;
    for (let i = 0; i < 8; i++) { if (document.getElementById('mod_date_' + i).value) filled++; }
    document.querySelectorAll('.check-item.checked').forEach(() => filled++);
    const pct = Math.round((filled / totalFields) * 100);
    document.getElementById('progressFill').style.width = pct + '%';
    document.getElementById('progressPct').textContent = pct + '%';
}
document.querySelectorAll('input, select, textarea').forEach(el => el.addEventListener('input', updateProgress));

// ===== SCROLL TO TOP BUTTON =====
window.addEventListener('scroll', () => {
    document.getElementById('scrollTop').classList.toggle('show', window.scrollY > 400);
});

// ===== COLETAR DADOS DO FORMUL√ÅRIO =====
function coletarDados() {
    // M√≥dulos
    const modulosData = [];
    let modulosCompletos = 0;
    for (let i = 0; i < 8; i++) {
        const data = document.getElementById('mod_date_' + i).value;
        const instrutor = document.getElementById('mod_by_' + i).value;
        if (data) modulosCompletos++;
        modulosData.push({ nome: modulos[i], data: data || null, instrutor: instrutor || null });
    }

    // Checklists
    function coletarChecklist(containerId, items) {
        const result = [];
        items.forEach((item, i) => {
            const el = document.getElementById(containerId + '_' + i);
            if (el && el.classList.contains('checked')) {
                result.push(typeof item === 'string' ? item : item.nome);
            }
        });
        return result;
    }

    return {
        lider_id: liderId,
        discipulo_nome: document.getElementById('fNome').value.trim(),
        discipulo_telefone: document.getElementById('fTel').value.trim(),
        discipulo_redes: document.getElementById('fRedes').value.trim(),
        discipulo_rede: document.getElementById('fRede').value.trim(),
        discipulador: document.getElementById('fDiscipulador').value.trim(),
        data_inicio: document.getElementById('fInicio').value || null,
        modulos: modulosData,
        modulos_completos: modulosCompletos,
        aptidoes: coletarChecklist('aptidoesContainer', aptidoes),
        indicadores: coletarChecklist('indicadoresContainer', indicadores),
        ministerios: coletarChecklist('ministeriosContainer', ministerios),
        dons: coletarChecklist('donsContainer', dons),
        assinatura_discipulo: document.getElementById('sigCanvas1')._getData ? document.getElementById('sigCanvas1')._getData() : null,
        assinatura_discipulador: document.getElementById('sigCanvas2')._getData ? document.getElementById('sigCanvas2')._getData() : null
    };
}

// ===== SALVAR DADOS (Se√ß√£o 1) =====
document.getElementById('btnSalvarDados').addEventListener('click', async () => {
    const nome = document.getElementById('fNome').value.trim();
    if (!nome) { alert('Preencha o nome do disc√≠pulo.'); return; }
    if (!liderId) { alert('Sess√£o expirada. Fa√ßa login novamente.'); return; }
    
    const btn = document.getElementById('btnSalvarDados');
    btn.textContent = 'SALVANDO...'; btn.disabled = true;
    
    const dados = coletarDados();
    const result = await api('consolidacao', dados);
    
    if (result) {
        document.getElementById('saveOverlay').classList.add('show');
    } else {
        alert('Erro ao salvar. Tente novamente.');
    }
    
    btn.textContent = 'SALVAR DADOS'; btn.disabled = false;
});

// ===== OBJETIVO ALCAN√áADO (Final) =====
document.getElementById('btnSubmit').addEventListener('click', async () => {
    const nome = document.getElementById('fNome').value.trim();
    if (!nome) { alert('Preencha o nome do disc√≠pulo.'); return; }
    if (!liderId) { alert('Sess√£o expirada. Fa√ßa login novamente.'); return; }
    if (!confirm('Confirma que o disc√≠pulo ' + nome + ' concluiu todo o processo de consolida√ß√£o?')) return;
    
    const btn = document.getElementById('btnSubmit');
    btn.textContent = 'FINALIZANDO...'; btn.disabled = true;
    
    const dados = coletarDados();
    dados.objetivo_alcancado = true;
    const result = await api('consolidacao', dados);
    
    if (result) {
        document.getElementById('objetivoOverlay').classList.add('show');
    } else {
        alert('Erro ao finalizar. Tente novamente.');
    }
    
    btn.textContent = '‚ú¶ OBJETIVO ALCAN√áADO ‚ú¶'; btn.disabled = false;
});

// ===== SIGNATURE PAD =====
function initSignaturePad(canvasId, wrapId) {
    const canvas = document.getElementById(canvasId);
    const wrap = document.getElementById(wrapId);
    const ctx = canvas.getContext('2d');
    let drawing = false;
    let hasSigned = false;

    function resizeCanvas() {
        const rect = canvas.getBoundingClientRect();
        const dpr = window.devicePixelRatio || 1;
        const tempImg = hasSigned ? canvas.toDataURL() : null;
        canvas.width = rect.width * dpr;
        canvas.height = rect.height * dpr;
        ctx.scale(dpr, dpr);
        ctx.strokeStyle = '#1a1a1a';
        ctx.lineWidth = 2;
        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';
        if (tempImg) {
            const img = new Image();
            img.onload = () => ctx.drawImage(img, 0, 0, rect.width, rect.height);
            img.src = tempImg;
        }
    }

    function getPos(e) {
        const rect = canvas.getBoundingClientRect();
        const touch = e.touches ? e.touches[0] : e;
        return { x: touch.clientX - rect.left, y: touch.clientY - rect.top };
    }

    function startDraw(e) { e.preventDefault(); drawing = true; wrap.classList.add('active'); const pos = getPos(e); ctx.beginPath(); ctx.moveTo(pos.x, pos.y); }
    function draw(e) { if (!drawing) return; e.preventDefault(); const pos = getPos(e); ctx.lineTo(pos.x, pos.y); ctx.stroke(); hasSigned = true; }
    function endDraw(e) { if (!drawing) return; e.preventDefault(); drawing = false; wrap.classList.remove('active'); if (hasSigned) wrap.classList.add('signed'); }

    canvas.addEventListener('mousedown', startDraw);
    canvas.addEventListener('mousemove', draw);
    canvas.addEventListener('mouseup', endDraw);
    canvas.addEventListener('mouseleave', endDraw);
    canvas.addEventListener('touchstart', startDraw, { passive: false });
    canvas.addEventListener('touchmove', draw, { passive: false });
    canvas.addEventListener('touchend', endDraw);
    canvas.addEventListener('touchcancel', endDraw);

    canvas._clear = () => { const rect = canvas.getBoundingClientRect(); ctx.clearRect(0, 0, rect.width, rect.height); hasSigned = false; wrap.classList.remove('signed', 'active'); };
    canvas._getData = () => hasSigned ? canvas.toDataURL('image/png') : null;

    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);
}

function clearSignature(canvasId, wrapId) {
    document.getElementById(canvasId)._clear();
}

initSignaturePad('sigCanvas1', 'sigWrap1');
initSignaturePad('sigCanvas2', 'sigWrap2');
</script>
</body>
</html>
